<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VIBE - AI Programming Assistant Experiment</title>

    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- IMPORTANT: Link to your custom CSS file -->
    <link rel="stylesheet" href="css/main.css" />

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap"
      rel="stylesheet"
    />

    <!-- CodeMirror -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/codemirror.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/theme/dracula.min.css"
    />

    <!-- GitHub Pages specific configuration -->
    <script>
      // Set backend URL for GitHub Pages
      window.BACKEND_URL = "BACKEND_URL_PLACEHOLDER";

      // Debug info
      console.log("🌐 Running on GitHub Pages");
      console.log("📡 Backend URL:", window.BACKEND_URL);
    </script>
  </head>
  <body class="text-sm">
    <!-- GitHub Pages Notice -->
    <div
      id="github-pages-notice"
      class="bg-blue-600 text-white text-center py-2 text-xs"
    >
      🚀 Running on GitHub Pages - Backend powered by Azure |
      <span id="backend-status">Testing connection...</span>
    </div>

    <!-- Rest of your existing HTML content from index.html -->
    <!-- This content will be inserted by the GitHub Actions workflow -->

    <!-- External Libraries - ADD THESE -->
    <script src="js/skulpt/skulpt.min.js"></script>
    <script src="js/skulpt/skulpt-stdlib.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/mode/python/python.min.js"></script>

    <!-- Link to your custom JS file - ADD THIS -->
    <script type="module" src="js/script.js"></script>

    <!-- GitHub Pages specific scripts - load after main content -->
    <script type="module">
      // Test backend connection and show status
      if (
        window.BACKEND_URL &&
        window.BACKEND_URL !== "BACKEND_URL_PLACEHOLDER"
      ) {
        console.log("Testing backend connection to:", window.BACKEND_URL);

        // Test the health endpoint
        fetch(`${window.BACKEND_URL}/api/health`)
          .then((response) => {
            if (!response.ok) {
              throw new Error(
                `HTTP ${response.status}: ${response.statusText}`
              );
            }
            return response.json();
          })
          .then((data) => {
            console.log("✅ Backend health check successful:", data);
            document.getElementById("backend-status").textContent =
              "✅ Backend Connected";
          })
          .catch((error) => {
            console.error("❌ Backend health check failed:", error);
            document.getElementById(
              "backend-status"
            ).textContent = `❌ ${error.message}`;
          });
      } else {
        console.error("❌ Backend URL not configured");
        document.getElementById("backend-status").textContent =
          "❌ Config Missing";
      }
    </script>
  </body>
</html>
